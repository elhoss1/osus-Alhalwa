<div class="product-card">
  <!-- Product Image Section -->
  <div class="product-image-wrapper">
    <div class="product-image">
      <img
        [src]="product.images && product.images.length > 0 ? product.images[0].src : 'https://via.placeholder.com/300x300?text=No+Image'"
        [alt]="product.name"
        class="product-img"
      />

      <!-- Overlay on Hover -->
      <div class="image-overlay">
        <button class="btn-quick-view" title="Ø¹Ø±Ø¶ Ø³Ø±ÙŠØ¹" (click)="openQuickView(product)">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
            <circle cx="12" cy="12" r="3"></circle>
          </svg>
        </button>
      </div>

      <!-- Product Badges -->
      <div class="badges-container">
        <div class="product-badge discount-badge" *ngIf="product.sale_price">
          <span class="badge-text">Ø®ØµÙ…</span>
        </div>
        <div
          class="product-badge stock-badge"
          [class.in-stock]="product.stock_status === 'instock'"
          [class.out-of-stock]="product.stock_status !== 'instock'"
        >
          {{ product.stock_status === 'instock' ? 'âœ“ Ù…ØªÙˆÙØ±' : 'âœ— ØºÙŠØ± Ù…ØªÙˆÙØ±' }}
        </div>
      </div>

      <!-- Quick Add (Mobile) -->
      <button
        class="btn-quick-add-mobile"
        (click)="addToCart()"
        [disabled]="product.stock_status !== 'instock'"
        *ngIf="product.stock_status === 'instock'"
      >
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Product Info Section -->
  <div class="product-info">
    <h3 class="product-name">{{ product.name }}</h3>
    <div class="product-description" [innerHTML]="product.short_description"></div>

    <div class="product-price-section">
      <div class="price-display">
        <span class="current-price">{{ product.price }} Ø±.Ø³</span>
        <span class="old-price" *ngIf="product.sale_price && product.regular_price !== product.price">
          {{ product.regular_price }} Ø±.Ø³
        </span>
      </div>
    </div>

    <div class="product-actions">
      <button
        class="btn btn-primary btn-add-to-cart"
        (click)="addToCart()"
        [disabled]="product.stock_status !== 'instock'"
        [class.disabled]="product.stock_status !== 'instock'"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        <span class="btn-text">{{ product.stock_status === 'instock' ? 'Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©' : 'ØºÙŠØ± Ù…ØªÙˆÙØ±' }}</span>
      </button>
    </div>

    <div class="product-meta">
      <div class="meta-item">
        <span class="meta-icon">ğŸšš</span>
        <span class="meta-text">ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹</span>
      </div>
      <div class="meta-item">
        <span class="meta-icon">ğŸ”’</span>
        <span class="meta-text">Ø¢Ù…Ù†</span>
      </div>
    </div>
  </div>
</div>

<!-- âœ… Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø±ÙŠØ¹ -->
<div class="quick-view-modal" *ngIf="selectedProduct">
  <div class="quick-view-content">
    <span class="close-btn" (click)="closeQuickView()">&times;</span>

    <img [src]="selectedProduct.images?.[0]?.src" [alt]="selectedProduct.name" class="modal-image" />

    <div class="modal-details">
      <h2 class="modal-title">{{ selectedProduct.name }}</h2>
      <div class="product-description" [innerHTML]="product.short_description"></div>
      <p class="modal-price">{{ selectedProduct.price }} Ø±.Ø³</p>

      <button class="btn btn-primary" (click)="addToCart()">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
    </div>
  </div>
</div>

<!-- Toast -->
<div class="toast" [class.show]="showToast">
  <div class="toast-content">
    <span class="toast-icon">âœ“</span>
    <span class="toast-message">ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­!</span>
  </div>
</div>
