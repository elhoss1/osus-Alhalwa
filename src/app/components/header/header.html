<header class="header">
  <div class="container">
    <div class="header-content">

      <!-- ðŸ”¹ Logo -->
      <div class="logo">
        <a routerLink="/">
          <div class="logo-wrapper">
            <svg class="logo-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a8 8 0 0 1 4.51 0l-3.95 3.95H20.95a10 10 0 0 0-8.95-9z"/>
              <path d="M12 22c5.523 0 10-4.477 10-10v-.5H2v.5c0 5.523 4.477 10 10 10z"/>
            </svg>
            <img src="images/logo osus-2_page-0001.jpg" alt="ossus AlHalwa" class="logo-img" />
          </div>
        </a>
      </div>

      <!-- ðŸ”¹ Search -->
      <div class="search-container">
        <div class="search-wrapper">
          <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <input
            type="text"
            class="search-input"
            placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª..."
            [(ngModel)]="searchQuery"
            (input)="onSearchInput()"
          />
          <button
            *ngIf="searchQuery"
            class="clear-btn"
            (click)="clearSearch()"
            aria-label="Ù…Ø³Ø­ Ø§Ù„Ø¨Ø­Ø«">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>

        <!-- ðŸ”¹ Search Results -->
        <div class="search-results" *ngIf="searchQuery">

          <!-- Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
          <div *ngIf="loadingSearch" class="loading-message">
            <div class="spinner"></div>
            <p>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...</p>
          </div>

          <!-- Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
          <div *ngIf="!loadingSearch && filteredProducts.length > 0">
            <div
              class="search-result-item"
              *ngFor="let product of filteredProducts"
              (click)="selectProduct(product)">
              <img [src]="product.images?.[0]?.src" [alt]="product.name" class="product-thumbnail" />
              <div class="product-info">
                <h4>{{ product.name }}</h4>
                <p class="product-price">{{ product.price }} &#xFDFC;</p>
              </div>
            </div>
          </div>

          <!-- Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ -->
          <div *ngIf="!loadingSearch && noResults" class="no-results">
            <p>ðŸ˜” Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø¨Ø­Ø«</p>
          </div>
        </div>
      </div>

      <!-- ðŸ”¹ Actions -->
      <div class="header-actions">
        <div class="cart-icon">
          <a routerLink="/cart">
            <div class="icon-wrapper">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
              </svg>
              <span class="cart-count" *ngIf="cartItemCount > 0">{{ cartItemCount }}</span>
            </div>
          </a>
        </div>

        <div class="user-icon" (click)="toggleLoginModal()">
          <div class="icon-wrapper">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 21v-2a4 4 0 0 0-3-3.87"></path>
              <path d="M4 21v-2a4 4 0 0 1 3-3.87"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </div>
        </div>
      </div>

    </div>
  </div>
</header>

<!-- Login Modal -->
<app-login
  [isVisible]="showLoginModal"
  (closeEvent)="closeLoginModal()"
  (loginSuccess)="onLoginSuccess()">
</app-login>
