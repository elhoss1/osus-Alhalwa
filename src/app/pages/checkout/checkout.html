  <div class="checkout-page">
    <!-- Page Header - Premium -->
    <div class="page-header">
      <div class="header-overlay"></div>
      <div class="container">
        <div class="header-content">
          <div class="header-breadcrumb">
            <a href="#" class="breadcrumb-link">ุงูุณูุฉ</a>
            <span class="breadcrumb-separator">/</span>
            <span class="breadcrumb-current">ุฅุชูุงู ุงูุทูุจ</span>
          </div>
          <h1>โ ุฅุชูุงู ุงูุทูุจ</h1>
          <p>ุฃููู ุจูุงูุงุชู ุจุณูููุฉ ูุฅุชูุงู ุนูููุฉ ุงูุดุฑุงุก ุงูุขููุฉ</p>
        </div>
        <div class="progress-indicator">
          <div class="progress-step completed">
            <span class="step-number">1</span>
            <span class="step-label">ุงูุณูุฉ</span>
          </div>
          <div class="progress-line"></div>
          <div class="progress-step active">
            <span class="step-number">2</span>
            <span class="step-label">ุงูุฏูุน</span>
          </div>
          <div class="progress-line"></div>
          <div class="progress-step">
            <span class="step-number">3</span>
            <span class="step-label">ุงูุชุฃููุฏ</span>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <!-- Checkout with Items -->
      <div class="checkout-content" *ngIf="cartItems.length > 0">
        <!-- Checkout Form Section -->
        <div class="checkout-form-section">
          <form (ngSubmit)="submitOrder()" class="checkout-form">
            <!-- Shipping Information -->
            <div class="form-section">
              <div class="section-header">
                <h2>๐ ูุนูููุงุช ุงูุดุญู</h2>
                <span class="section-badge">ูุทููุจ</span>
              </div>

              <div class="form-group">
                <label for="firstName">ุงูุงุณู ุงููุงูู *</label>
                <input type="text"
                      id="firstName"
                      [(ngModel)]="orderData.billing.first_name"
                      name="firstName"
                      placeholder="ุฃุฏุฎู ุงุณูู ุงููุงูู"
                      required />
                <span class="form-hint">ุณูุชู ุงุณุชุฎุฏุงู ูุฐุง ุงูุงุณู ูู ุงูุดุญูุฉ</span>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="phone">ุฑูู ุงูุฌูุงู *</label>
                  <input type="tel"
                        id="phone"
                        [(ngModel)]="orderData.billing.phone"
                        name="phone"
                        placeholder="05xxxxxxxxx"
                        required />
                </div>

                <div class="form-group">
                  <label for="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู *</label>
                  <input type="email"
                        id="email"
                        [(ngModel)]="orderData.billing.email"
                        name="email"
                        placeholder="example@email.com"
                        required />
                </div>
              </div>


              <div class="form-group">
                <label for="city">ุงููุฏููุฉ *</label>
                <div class="select-wrapper">
                  <select [(ngModel)]="orderData.billing.city"
                          id="city"
                          name="city"
                          (change)="updateShipping()"
                          required
                          class="form-control custom-select">
                    <option value="" disabled selected>ุงุฎุชุฑ ุงููุฏููุฉ</option>
                    <option value="ุดูุฑุงุก">ุดูุฑุงุก</option>
                    <option value="ุฃุดููุฑ">ุฃุดููุฑ</option>
                    <option value="ุงููุฑุงุฆู - ุงูููู">ุงููุฑุงุฆู - ุงูููู</option>
                    <option value="ุงููุฑุงุฆู - ุบุณูุฉ">ุงููุฑุงุฆู - ุบุณูุฉ</option>
                    <option value="ูุญุงูุธุฉ ุงูุฏุฑุนูุฉ"> ูุญุงูุธุฉ ุงูุฏุฑุนูุฉ </option>
                    <option value="ุดูุงู ุงูุฑูุงุถ">ุดูุงู ุงูุฑูุงุถ</option>
                  </select>
                  <svg class="select-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"></polyline>
                  </svg>
                </div>
              </div>




              <!-- ูุธูุฑ ููุท ูู ุงููุฏููุฉ = ุดูุงู ุงูุฑูุงุถ -->
               <div class="form-group">
                  <div *ngIf="isNorthRiyadh" class="area-select-box">
                    <label>ุงุฎุชุฑ ุงูุญู *</label>
                    <div class="select-wrapper">
                    <select [(ngModel)]="selectedArea" name="selectedArea" id="neighborhood" class="form-control custom-select">
                      <option value="" disabled selected>ุงุฎุชุฑ ุงูุญู</option>
                      <option *ngFor="let area of northRiyadhAreas" [value]="area">
                        {{ area }}
                      </option>
                    </select>
                    <svg class="select-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"></polyline>
                  </svg>
                    </div>
                  </div>
              </div>


              <!-- <div class="form-group">
                <label>ุงุฎุชุฑ ููู ุงูุชูุตูู:</label>
                <div class="select-wrapper">
                <select
                  class="form-control custom-select"
                  [(ngModel)]="selectedDeliveryDay"
                  name="delivery_day"
                  required
                >
                  <option value="" disabled selected>ุงุฎุชุฑ ุงูููู</option>
                  <option *ngFor="let d of weekDays"
                      [value]="d.dayName + ' - ' + d.fullDate">
                      {{ d.dayName }} - {{ d.date }}
                  </option>
                </select>
                </div>
              </div> -->



              <!-- <div class="form-group">
                <label>ุงุฎุชุฑ ููู ุงูุชูุตูู:</label>
                <div class="select-wrapper">
                <div class="dates-container">
                <div
                  class="day-box"
                  *ngFor="let d of weekDays"
                  [class.active]="selectedDay?.fullDate === d.fullDate"
                  [class.disabled]="d.disabled"
                  (click)="selectDay(d)"
                >
                  <div class="day-name">{{ d.dayName }}</div>
                  <div class="day-date">{{ d.dateText }}</div>
                </div>
              </div>
                </div>
              </div> -->


               <div class="form-group">
                <label for="address">ุงูุนููุงู *</label>
                <input type="text"
                      id="address"
                      [(ngModel)]="orderData.billing.address_1"
                      name="address"
                      placeholder="ุฃุฏุฎู ุนููุงู ุงูุชูุตูู ุงููุงูู (ุงูุดุงุฑุน ูุงูุญู ูุฑูู ุงูููุฒู)"
                      required />

              </div>






              <div class="delivery-title">ุงุฎุชุฑ ููู ุงูุชูุตูู</div>

                <div class="dates-grid">
                  <div
                    class="date-card"
                    *ngFor="let d of weekDays"
                    [class.active]="selectedDay?.fullDate === d.fullDate"
                    [class.disabled]="d.disabled"
                    (click)="selectDay(d)"
                  >
                    <div class="day-name">{{ d.dayName }}</div>
                    <div class="date-text">{{ d.dateText }}</div>
                  </div>
                </div>


                <div *ngIf="selectedDate">
                  <div class="delivery-time-title">ุงุฎุชุฑ ููุช ุงูุชูุตูู</div>

                  <div class="delivery-time-grid">
                    <div
                      class="time-option"
                      [class.selected]="selectedTime === 'morning'"
                      (click)="selectedTime = 'morning'"
                    >
                      <div class="time-title">ุตุจุงุญ</div>
                      <div class="time-range">11 ุตุจุงุญุงู - 3 ูุณุงุกู</div>
                    </div>

                    <div
                      class="time-option"
                      [class.selected]="selectedTime === 'evening'"
                      (click)="selectedTime = 'evening'"
                    >
                      <div class="time-title">ูุณุงุก</div>
                      <div class="time-range">4 ูุณุงุกู - 8 ูุณุงุกู</div>
                    </div>
                  </div>
                </div>






              <!-- <div class="dates-container">
                <div
                  class="day-box"
                  *ngFor="let d of weekDays"
                  [class.active]="selectedDay?.fullDate === d.fullDate"
                  [class.disabled]="d.disabled"
                  (click)="selectDay(d)"
                >
                  <div class="day-name">{{ d.dayName }}</div>
                  <div class="day-date">{{ d.dateText }}</div>
                </div>
              </div> -->









            </div>

            <!-- Additional Notes -->
            <!-- <div class="form-section">
              <div class="section-header">
                <h2>๐ ููุงุญุธุงุช ุฅุถุงููุฉ</h2>
                <span class="section-badge optional">ุงุฎุชูุงุฑู</span>
              </div>

              <div class="form-group">
                <label for="notes">ููุงุญุธุงุช ุงูุทูุจ</label>
                <textarea id="notes"
                          [(ngModel)]="orderData.customer_note"
                          name="notes"
                          rows="4"
                          placeholder="ุฃุถู ุฃู ููุงุญุธุงุช ุฎุงุตุฉ ุจุทูุจู (ูุซู ุงูุชุนูููุงุช ุงูุฎุงุตุฉ ููุชูุตูู)"></textarea>
                <span class="form-hint">ุงุฎุชูุงุฑู - ูู ูุชู ุงุณุชุฎุฏุงู ูุฐู ุงููุนูููุงุช ูุฃู ุบุฑุถ ุขุฎุฑ</span>
              </div>
            </div> -->

            <!-- Payment Method -->
            <div class="form-section">
    <div class="section-header">
      <h2>๐ณ ุทุฑููุฉ ุงูุฏูุน</h2>
      <span class="section-badge">ูุทููุจ</span>
    </div>

    <div class="payment-methods">
      <label class="payment-method" *ngFor="let method of paymentMethods">
        <input type="radio"
              name="payment"
              [value]="method.id"
              [(ngModel)]="orderData.payment_method"
              (change)="orderData.payment_method_title = method.title" />

        <div class="payment-content">
          <div class="payment-icon">๐ณ</div>
          <div class="payment-info">
            <span class="payment-title">{{ method.title }}</span>
            <span class="payment-desc">{{ method.description || 'ุทุฑููุฉ ุฏูุน ุขููุฉ ูุณุฑูุนุฉ' }}</span>
          </div>
        </div>
        <span class="payment-check"></span>
      </label>
    </div>
  </div>


            <!-- Submit Button -->
            <button type="submit"
                    class="btn btn-primary btn-submit"
                    [disabled]="submitting">
              <span class="btn-icon" *ngIf="!submitting">โ</span>
              <span class="btn-spinner" *ngIf="submitting">
                <span class="spinner"></span>
              </span>
              {{ submitting ? 'ุฌุงุฑู ุฅุฑุณุงู ุงูุทูุจ...' : 'ุชุฃููุฏ ุงูุทูุจ ูุงูุฏูุน' }}
            </button>

            <!-- Security Info -->
            <div class="security-info">
              <div class="security-item">
                <span class="security-icon">๐</span>
                <span class="security-text">ุจูุงูุงุช ุขููุฉ ููุดูุฑุฉ</span>
              </div>
              <div class="security-item">
                <span class="security-icon">โ</span>
                <span class="security-text">ูุนุชูุฏ ูู ูุจู ุงูุฌูุงุช ุงูุฑุณููุฉ</span>
              </div>
            </div>
          </form>
        </div>

        <!-- Order Summary Section -->
        <div class="order-summary-section">
          <div class="order-summary">
            <div class="summary-header">
              <h2>๐ฆ ููุฎุต ุงูุทูุจ</h2>
              <span class="summary-badge">{{ cartItems.length }} ููุชุฌ</span>
            </div>

            <!-- Order Items -->
            <div class="summary-items">
              <div class="summary-item" *ngFor="let item of cartItems">
                <div class="item-info">
                  <div class="item-image">
                    <img [src]="item.product.images && item.product.images.length > 0 ? item.product.images[0].src : 'https://via.placeholder.com/50'"
                        [alt]="item.product.name" />
                  </div>
                  <div class="item-details">
                    <span class="item-name">{{ item.product.name }}</span>
                    <span class="item-qty">ุงููููุฉ: {{ item.quantity }}</span>
                  </div>
                </div>
                <span class="item-price">{{ getItemTotal(item) }} ุฑ.ุณ</span>
              </div>
            </div>

            <div class="summary-divider"></div>

            <!-- Summary Totals -->
            <div class="summary-totals">
              <div class="summary-row">
                <span class="summary-label">ุงููุฌููุน :</span>
                <span class="summary-value">{{ total }} ุฑ.ุณ</span>
              </div>
              <div class="summary-row">
                <span class="summary-label">ุฑุณูู ุงูุชูุตูู:</span>
              <span class="summary-value">
                  <span [ngStyle]="{ color: shiping === 0 ? 'green' : 'inherit' }">
                    {{ shiping === 0 ? 'ูุฌุงูู' : shiping + ' ุฑ.ุณ' }}
                  </span>
                </span>

              </div>
              <div class="summary-row discount" *ngIf="discountAmount > 0">
                <span class="summary-label">ุงูุฎุตู:</span>
                <span class="summary-value discount-value">- {{ discountAmount }} ุฑ.ุณ</span>
              </div>
            </div>

            <div class="summary-divider"></div>

            <!-- Final Total -->
            <div class="summary-total">
              <span class="total-label">ุงูุฅุฌูุงูู :</span>
              <span class="total-amount">{{ total + shiping - discountAmount }} ุฑ.ุณ</span>
            </div>

            <!-- Order Info -->
            <!-- <div class="order-info">
              <div class="info-item">
                <span class="info-icon">๐</span>
                <div class="info-content">
                  <span class="info-label">ุทุฑููุฉ ุงูุชูุตูู</span>
                  <span class="info-value">ุชูุตูู ุณุฑูุน</span>
                </div>
              </div>
              <div class="info-item">
                <span class="info-icon">โฑ๏ธ</span>
                <div class="info-content">
                  <span class="info-label">ููุช ุงูุชูุตูู</span>
                  <span class="info-value">1-2 ููู ุนูู</span>
                </div>
              </div>
            </div> -->

            <!-- Promo Code -->
            <div class="promo-section">
            <input
                type="text"
                placeholder="ุฃุฏุฎู ููุฏ ุงูุฎุตู (ุงุฎุชูุงุฑู)"
                class="promo-input"
                [(ngModel)]="couponCode"
              />
              <button type="button" class="btn-promo" (click)="applyCoupon()">
                ุชุทุจูู
              </button>
            </div>

            <!-- Trust Badges -->
            <div class="trust-badges">
              <div class="badge">
                <span class="badge-icon">๐</span>
                <span class="badge-text">ุฏูุน ุขูู</span>
              </div>
              <div class="badge">
                <span class="badge-icon">๐</span>
                <span class="badge-text">ุชูุตูู ุณุฑูุน</span>
              </div>
              <div class="badge">
                <span class="badge-icon">๐๏ธ</span>
                <span class="badge-text">ูุนุชูุฏ ูู ูุฒุงุฑู ุงูุชุฌุงุฑุฉ</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Empty Cart State -->
      <div class="empty-cart" *ngIf="cartItems.length === 0">
        <div class="empty-illustration">
          <div class="empty-icon">๐</div>
          <div class="empty-decoration">
            <span class="decoration-dot decoration-1"></span>
            <span class="decoration-dot decoration-2"></span>
            <span class="decoration-dot decoration-3"></span>
          </div>
        </div>
        <h2>ุณูุฉ ุงูุชุณูู ูุงุฑุบุฉ</h2>
        <p>ูุง ููููู ุฅุชูุงู ุงูุทูุจ ุจุฏูู ููุชุฌุงุช. ุงุจุฏุฃ ุงูุชุณูู ุงูุขู!</p>
        <div class="empty-actions">
          <a routerLink="/products" class="btn btn-primary btn-large">
            <span class="btn-icon">๐๏ธ</span>
            ุชุตูุญ ุงูููุชุฌุงุช
          </a>
        </div>
      </div>
    </div>
  </div>
